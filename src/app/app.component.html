<!-- Updated App Component Template with Toggle All button in header -->
<div class="flex flex-col h-screen overflow-hidden">
  <app-header
    class="flex-none"
    [showComposer]="showComposer()"
    (selectFolder)="onSelectFolder()"
    (reloadFolder)="onReloadFolder()"
    (toggleComposer)="onToggleComposer()"
    (toggleAll)="toggleAll()"
  ></app-header>

  <main class="flex flex-1 min-h-0 overflow-hidden">
    <!-- File View Section -->
    <section
      id="file-view"
      [ngClass]="{ 'w-1/2': showComposer(), 'w-full': !showComposer() }"
      class="border-r border-darkprimary p-6 overflow-y-auto h-full min-h-0 transition-all relative"
    >
      <!-- Loading State -->
      <div *ngIf="isLoadingFolder()" class="h-[calc(100vh-10rem)]">
        <app-loading-spinner></app-loading-spinner>
      </div>

      <!-- File Tree -->
      <div *ngIf="!isLoadingFolder()">
        <app-file-tree
          [nodes]="fileTree()"
          (fileCopy)="onIndividualCopy($event)"
        ></app-file-tree>
      </div>
    </section>

    <!-- Prompt Composer Section -->
    <section
      *ngIf="showComposer()"
      id="prompt-composer"
      class="w-1/2 p-6 flex flex-col bg-darkbg h-full min-h-0 overflow-hidden"
    >
      <app-prompt-composer
        [promptFormat]="promptFormat"
        [fileFormat]="fileFormat"
        [isCopying]="isCopying()"
        (fileFormatChange)="onFileFormatChange($event)"
        (promptFormatChange)="onPromptFormatChange($event)"
        (copyPrompt)="onCopyPrompt()"
      ></app-prompt-composer>
    </section>
  </main>
</div>

<!-- Toast Notifications -->
<app-toast></app-toast>
